sap.ui.define(["ui5lab/browser/controller/BaseController","sap/ui/model/json/JSONModel","ui5lab/browser/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library"],function(e,t,i,o,r,n){"use strict";return e.extend("ui5lab.browser.controller.Home",{formatter:i,onInit:function(){var e;e=new t({title:this.getResourceBundle().getText("homePanelTitle"),query:"",libraries:[{id:"ui5lab.geometry",name:"Geometry",source:"http://",documentation:"http://",demo:"http://",license:"Apache 2.0"}]});this.setModel(e,"homeView");this.getRouter().getTarget("home").attachEventOnce("display",this._onHomeTargetMatched,this);this.getOwnerComponent().samplesLoaded().then(this._fillLayout.bind(this),this._fillLayout.bind(this))},onSearch:function(e){var t=e?e.getParameter("newValue"):this.getModel("homeView").getProperty("/query"),i=this.byId("projects").getContent()[0];this.getModel("homeView").setProperty("/query",t);if(i.byId("table")){i.byId("table").getBinding("items").filter(new o("name",r.Contains,t))}else{i.byId("grid").getContent().forEach(function(e){e.getBinding("content").filter(new o("name",r.Contains,t))});setTimeout(function(){var e=false;i.byId("grid").getContent().forEach(function(t){if(t.getContent().length>0){e=true}});i.byId("nodata").setVisible(!e)},0)}},onSelect:function(e){var t=e.getParameter("key");this.byId("projects").removeAllContent();this.getRouter().getTarget("home"+t).display().then(function(){this.onSearch()}.bind(this))},onHelp:function(){n.URLHelper.redirect("https://ui5lab.io/docs/",true)},_onHomeTargetMatched:function(){if(this.byId("projects").getContent().length===0){this.getRouter().getTarget("homeGrid").display()}},_fillLayout:function(){var e=this.getModel("homeView"),t=this.getModel();if(t){var i=t.getData().libraries,o=[[]],r=0,n=4;e.setProperty("/libraries",i);for(var a=0;a<i.length;a++){o[r].push(i[a]);if(a%n===n-1){r++;o[r]=[]}}e.setProperty("/libraryRows",o);e.setProperty("/title",this.getResourceBundle().getText("homePanelTitleCount",[t.getData().libraries.length]))}}})});